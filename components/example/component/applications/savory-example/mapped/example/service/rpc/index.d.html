<%& '/site/header/' %>
<% exampleHeader('RPC', 'Service'); %>

<%

document.executeOnce('/prudence/resources/')
document.executeOnce('/sincerity/json/')
document.executeOnce('/sincerity/xml/')

var value1 = 2
var value2 = 6

if (conversation.request.method.name == 'POST') {
	value1 = parseFloat(conversation.form.get('value1'))
	value2 = parseFloat(conversation.form.get('value2'))
}

var result = Prudence.Resources.request({
	uri: '/math/',
	internal: true,
	method: 'post',
	mediaType: 'application/json',
	payload: {
		type: 'json',
		value: {
			jsonrpc: '2.0',
			method: 'Math.multiply',
			params: [value1, value2],
			id: 'abc'
		}
	}
})

%>

<p>
	We've exposed a simple multiplication function to the world. Let's call it using JSON-RPC!
</p>

<form method="post">
	<p>
		Value 1:
		<input name="value1" value=<%= value1 %> />
	</p>
	<p>
		Value 2:
		<input name="value2" value=<%= value2 %> />
	</p>
	<p>
		<input type="submit" value="Multiply" />
	</p>
</form>
<p class="note">
	Result: <%= result.result %>
</p>


<% exampleFooter('RPC', 'Service'); %>
<%& '/site/footer/' %>