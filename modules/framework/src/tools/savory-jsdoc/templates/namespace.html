{#

This file is part of the Savory Framework for Prudence

Copyright 2011 Three Crickets LLC.

The contents of this file are subject to the terms of the LGPL version 3.0:
http:www.opensource.org/licenses/lgpl-3.0.html

Alternatively, you can obtain a royalty free commercial license with less
limitations, transferable or non-transferable, directly from Three Crickets
at http://threecrickets.com/

#}
<!--

This file was generated by the Savory Framework for Prudence

The Savory Framework is copyright 2011 Three Crickets LLC.

See http://threecrickets.com/

-->

{! var properties = data.getAllProperties() !}
{! var methods = data.getAllMethods() !}
{! function meta(data) { !}
	<if test="data.deprecated || data.requires.length || data.version || data.since || data.author || data.see.length">
		<div class="meta">
			<if test="data.deprecated">
				Deprecated: {+ data.deprecated.toHtml(data.alias) +}<br />
			</if>
			<if test="data.requires.length">
				Requires:
				<for each="item" in="data.requires">
					{+ item.toLink(data.alias) +}<br />
				</for>
			</if>
			<if test="data.version">
				Version: {+ data.version.toHtml(data.alias) +}<br />
			</if>
			<if test="data.since">
				Since: {+ data.since.toHtml(data.alias) +}<br />
			</if>
			<if test="data.author">
				Author: {+ data.author.toHtml(data.alias) +}<br />
			</if>
			<if test="data.see.length">
				See:
				<for each="item" in="data.see">
					{+ item.toLink(data.alias) +}<br />
				</for>
			</if>
		</div>
	</if>		
{! } !}

<div class="header">
	<div class="title{+ data.deprecated ? ' deprecated' : '' +}">
		{+ (data.isa == 'CONSTRUCTOR' ? 'Class ' : 'Namespace ') + data.alias +}
	</div>
	<if test="data.augments.length">
		<div class="augments">
			Augments: {+
				data.augments.sort().map(function(symbol) {
					return String(symbol).toLink(data.alias)
				}).join(', ')
			+}
		</div>
	</if>
	<div class="menus">
		<a href="?namespace={+ encodeURIComponent(data.alias) +}">
			<div class="button">
				Permalink
			</div>
		</a>
		<if test="data.srcFile">
			<div class="open-source button" source="{+ encodeURIComponent(data.srcFile) +}">
				Source Code
			</div>
		</if>
		<if test="properties.length">
			<div class="menu button" items="div.property">
				Properties ({+ properties.length +})
			</div>
		</if>
		<if test="methods.length">
			<div class="menu button" items="div.method">
				Methods ({+ methods.length +})
			</div>
		</if>
	</div>
</div>

<if test="data.classDesc || data.desc || data.deprecated || data.requires.length || data.version || data.since || data.author || data.see.length">
	<div class="description">
		<if test="data.classDesc || data.desc">
			{+ (data.classDesc || data.desc).toHtml(data.alias) +}
		</if>
		{! meta(data) !}
	</div>
</if>

<if test="properties.length">
	<div class="properties">
		<div class="title">
			Properties
		</div>
		<for each="property" in="properties">
			<div class="property{+ $property_last ? ' last' : '' +}" id="{+ data.alias + '.' + property.name +}" menu="{+ property.name +}">
				<div class="signature{+ data.deprecated ? ' deprecated' : '' +}">
					{+ (property.isStatic ? data.alias + '.' : 'this.') + property.name +}
				</div>
				<if test="property.desc">
					<div class="description">
						{+ property.desc.toHtml(data.alias) +}
					</div>
				</if>
				<if test="property.type">
					<div class="extra">
						<if test="property.type">{+ property.type.toLinks(data.alias) +}</if>
					</div>
				</if>
				{! meta(property) !}
			</div>
		</for>
	</div>
</if>

<if test="methods.length">
	<div class="methods">
		<div class="title">
			Methods
		</div>
		<for each="method" in="methods">
			{! var params = method.parseParams() !}
			<div class="method{+ $method_last ? ' last' : '' +}" id="{+ data.alias + '.' + method.name +}" menu="{+ method === data ? 'constructor' : method.name +}">
				<div class="signature{+ method.deprecated ? ' deprecated' : '' +}">
					<if test="method === data">
						{+ 'new ' + data.alias + '(' + params.signature.map(niceShortParam).join(', ') + ')' +}
					<else />
						{+ (method.isStatic ? data.alias + '.' + method.name : 'this.' + method.name) + '(' + params.signature.map(niceShortParam).join(', ') + ')' +}
					</if>
				</div>
				<if test="(method !== data) || data.classDesc">{# Don't show description for constructors if it's already in the class description block above #}
					<div class="description">
						{+ method.desc.toHtml(data.alias) +}
					</div>
				</if>
				<if test="params.listed.length">
					<div class="parameters">
						<for each="param" in="method.params">
							<div class="parameter">
								<span class="name">
									<if test="param.isOptional"><span class="optional"></if>{+ param.name +}<if test="param.desc">:</if><if test="param.isOptional"></span></if>
								</span>
								<if test="param.desc"><span class="description">{+ param.desc.toHtml(data.alias) +}</span></if>
								<if test="param.type || param.defaultValue">
									<div class="extra">
										<if test="param.type">{+ param.type.toLinks(data.alias) +}</if>
										<if test="param.defaultValue">= {+ param.defaultValue +}</if>
									</div>
								</if>
							</div>
						</for>
					</div>
				</if>
				<if test="method.returns.length">
					<div class="returns">
						<for each="ret" in="method.returns">
							<div class="return">
								<span class="name">Returns<if test="ret.desc">:</if></span>
								<if test="ret.desc"><span class="description">{+ ret.desc.toHtml(data.alias) +}</span></if>
								<if test="ret.type">
									<div class="extra">
										{+ ret.type.toLinks(data.alias) +}
									</div>
								</if>
							</div>
						</for>
					</div>
				</if>
				<if test="method.exceptions.length">
					<div class="exceptions">
						<for each="exception" in="method.exceptions">
							<div class="exception">
								Throws:
								<if test="exception.type">{+ exception.type.toLinks(data.alias) +}</if>
								<if test="exception.desc">{+ exception.desc.toHtml(data.alias) +}</if>
							</div>
						</for>
					</div>
				</if>
				<if test="method !== data">{# Don't show meta data for constructors; it's already in the class description block above #} 
					{! meta(method) !}
				</if>
			</div>
		</for>
	</div>
</if>
