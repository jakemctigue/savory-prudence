<%#

This file is part of the Savory Framework for Prudence

Copyright 2011 Three Crickets LLC.

The contents of this file are subject to the terms of the LGPL version 3.0:
http:www.opensource.org/licenses/lgpl-3.0.html

Alternatively, you can obtain a royalty free commercial license with less
limitations, transferable or non-transferable, directly from Three Crickets
at http://threecrickets.com/

%><%

document.executeOnce('savory/feature/seo/')

var domain = Savory.SEO.getCurrentDomain(conversation)
if (domain) {
	print('Sitemap: ' + domain.getRootUri() + (domain.isDynamic() ? '/sitemap.xml' : '/sitemap.xml.gz') + '\n');
	print('User-agent: ' + (domain.getUserAgent() || '*') + '\n')
	
	var delaySeconds = domain.getDelaySeconds()
	if (delaySeconds) {
		print('Crawl-delay: ' + delaySeconds + '\n')
	}

	var robots = domain.getAllRobots()
	for (var i in robots.inclusions) {
		print('Allow: ' + robots.inclusions[i] + '\n')
	}
	for (var e in robots.exclusions) {
		print('Disallow: ' + robots.exclusions[e] + '\n')
	}
}
else {
	conversation.statusCode = 404
	conversation.stop()
}

%>
